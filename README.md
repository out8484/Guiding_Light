# 🤖 GitHub Models AI 챗봇 (Guiding Light)

GitHub Models API를 활용한 Streamlit 기반 AI 질문-답변 웹 애플리케이션입니다. 사용자 맞춤형 답변과 이미지 생성 기능을 제공합니다.

## 📋 목차
- [프로젝트 개요](#-프로젝트-개요)
- [주요 기능](#-주요-기능)
- [기술 스택](#-기술-스택)
- [설치 및 실행](#-설치-및-실행)
- [애플리케이션 설계](#-애플리케이션-설계)
- [이미지 생성 원리](#-이미지-생성-원리)
- [사용 방법](#-사용-방법)
- [문제 해결](#-문제-해결)

---

## 🎯 프로젝트 개요

이 프로젝트는 **Streamlit**을 사용하여 구축된 웹 기반 AI 챗봇 애플리케이션입니다. GitHub Models API를 통해 OpenAI의 GPT-4o-mini 모델에 접근하여 사용자의 질문에 답변을 제공하며, 답변 내용에 어울리는 이미지를 자동으로 생성하여 시각적인 경험을 제공합니다.

---

## ✨ 주요 기능

### 1. **스마트한 토큰 관리**
- **자동 검증:** 토큰 입력 즉시 유효성 검사
- **자동 저장:** 유효한 토큰은 `.env` 파일에 자동 저장되어 영구 보관
- **만료 알림:** 토큰 만료 5일 전부터 경고 메시지 표시 (30일 유효기간 기준)
- **공백 제거:** 복사/붙여넣기 시 발생하는 공백 자동 제거

### 2. **사용자 맞춤형 AI**
- **언어 선택:** 한국어/영어 지원
- **페르소나 설정:** 사용자의 연령대(10대~60대+)와 성별에 맞춰 답변 톤앤매너 조절
- **이미지 생성:** 답변 내용과 관련된 일러스트 자동 생성 (Pollinations.ai 활용)

### 3. **향상된 사용자 경험 (UX)**
- **완전한 한글화:** 모든 메뉴와 안내 메시지 한글 지원
- **에러 처리:** 연결 오류 시 자동 재시도(Retry) 및 명확한 에러 메시지 제공
- **편의 기능:** 입력 초기화, 토큰 재설정 버튼 제공

---

## 🛠 기술 스택

| 카테고리 | 기술 |
|---------|------|
| **프레임워크** | Streamlit |
| **AI 모델 (텍스트)** | GitHub Models (GPT-4o-mini) |
| **AI 모델 (이미지)** | Pollinations.ai (무료 이미지 생성 API) |
| **언어** | Python 3.11+ |
| **주요 라이브러리** | openai, python-dotenv |

---

## 🚀 설치 및 실행

### 1. 저장소 클론
```bash
git clone <저장소 URL>
cd Guiding_Light
```

### 2. 필수 패키지 설치
```bash
pip3 install streamlit openai python-dotenv
```

### 3. 애플리케이션 실행
```bash
python3 -m streamlit run main.py
```

### 4. 브라우저 접속
자동으로 브라우저가 열리며, 수동으로 접속하려면: `http://localhost:8501`

---

## 🎨 이미지 생성 원리

이 앱은 **Pollinations.ai**라는 무료 AI 이미지 생성 서비스를 사용합니다.

### 왜 Pollinations.ai를 사용했나요?
GitHub Models API는 현재 텍스트 모델(GPT-4o 등)만 무료로 제공하며, 이미지 생성 모델(DALL-E 3)은 지원하지 않습니다. 따라서 별도의 API 키 없이 무료로 고품질 이미지를 생성할 수 있는 Pollinations.ai를 대안으로 선택했습니다.

### 작동 방식
1.  **프롬프트 생성:** 사용자의 질문과 AI의 답변 내용을 바탕으로 이미지 생성을 위한 영어 프롬프트를 만듭니다.
    ```python
    image_prompt = f"Create an illustration representing this concept: {user_question}..."
    ```
2.  **URL 생성:** 프롬프트를 URL 인코딩하여 Pollinations.ai의 API 주소 뒤에 붙입니다.
    ```python
    https://image.pollinations.ai/prompt/{encoded_prompt}
    ```
3.  **이미지 표시:** 생성된 URL을 Streamlit의 `st.image()` 함수에 전달하여 화면에 표시합니다. 별도의 다운로드나 복잡한 인증 과정이 필요 없습니다.

---

## 🏗 애플리케이션 설계

### 아키텍처 개요

```
┌─────────────────────────────────────────┐
│         사용자 (웹 브라우저)              │
└──────────────┬──────────────────────────┘
               │ HTTP
               ▼
┌─────────────────────────────────────────┐
│      Streamlit 웹 서버 (main.py)        │
│  ┌───────────────────────────────────┐  │
│  │  1. 토큰 매니저                    │  │
│  │     - .env 파일 읽기/쓰기          │  │
│  │     - 유효성 검사 & 만료일 체크     │  │
│  └───────────────────────────────────┘  │
│  ┌───────────────────────────────────┐  │
│  │  2. AI 처리 엔진                   │  │
│  │     - 텍스트: GitHub Models API    │  │
│  │     - 이미지: Pollinations.ai API  │  │
│  └───────────────────────────────────┘  │
└──────────────┬──────────────┬───────────┘
               │              │
      (텍스트 요청) │              │ (이미지 요청)
               ▼              ▼
┌─────────────────────┐  ┌─────────────────────┐
│  GitHub Models API  │  │   Pollinations.ai   │
│   (GPT-4o-mini)     │  │   (Image Gen)       │
└─────────────────────┘  └─────────────────────┘
```

---

##  사용 방법

1.  **GitHub Token 발급:**
    - 앱 내의 "GitHub Token 발급 방법 보기"를 참고하여 토큰을 발급받습니다.
2.  **토큰 입력:**
    - 앱 실행 후 토큰을 입력하면 자동으로 검증하고 저장합니다.
3.  **설정 선택:**
    - 사이드바에서 언어, 연령대, 성별을 선택합니다.
    - 이미지가 필요하면 "️ 답변과 함께 이미지 생성하기"를 체크합니다.
4.  **질문하기:**
    - 궁금한 내용을 입력하고 Enter를 누르세요.

---

## 🔧 문제 해결

### Q1. "401 Unauthorized" 에러가 계속 떠요.
- 토큰이 만료되었거나 잘못 입력된 경우입니다.
- "🔄 토큰 재설정" 버튼을 누르고 새로운 토큰을 입력하세요.

### Q2. 이미지가 생성되지 않아요.
- Pollinations.ai 서버 상태에 따라 가끔 생성이 지연되거나 실패할 수 있습니다.
- 잠시 후 다시 시도해 보세요.

### Q3. 토큰을 저장했는데도 계속 물어봐요.
- `.env` 파일 쓰기 권한이 있는지 확인해 주세요.
- 로컬 환경이 아닌 클라우드(Streamlit Cloud 등)에 배포한 경우, 해당 플랫폼의 Secrets 관리 기능을 사용해야 합니다.

---

## 📝 라이선스

이 프로젝트는 MIT 라이선스를 따릅니다.
